(this["webpackJsonpdan-lab-ui"]=this["webpackJsonpdan-lab-ui"]||[]).push([[0],{16:function(e,t,a){},24:function(e,t,a){},39:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(19),c=(a(39),a(4)),o=a(9),i=a(7),s=a(11),u=a(6),l=(a(16),a(0)),d=function(e){var t=e.opciones,a=e.value,n=e.onChange,r=e.label,c=e.name,o=t?t.map((function(e,t){return Object(l.jsx)("option",{value:e,children:e},t)})):Object(l.jsx)(l.Fragment,{});return Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:r}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("select",{name:c,value:a,onChange:n,children:o})})]})},j=function(e){var t=e.value;return Object(l.jsx)("label",{className:"form-label",children:t})},b=function(e){var t=e.action,a=e.label;return Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{onClick:function(e){return t(e)},children:a})})},p=function(e){var t=e.value,a=e.onChange,n=e.label,r=e.name,c=e.pattern,o=e.readOnly;return Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:n}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:r,pattern:c,value:t,onChange:a,readOnly:o})})]})},m=function(e){var t=e.cliente,a=e.actualizarCliente,n=e.saveOrUpdate,r=e.clean,c=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;e.target.validity.valid&&a(t,n)};return Object(l.jsx)("div",{className:"panel-form-simple",children:Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Raz\xf3n Social:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"razonSocial",value:t.razonSocial,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Cuit:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{type:"text",pattern:"[0-9]*",name:"cuit",value:t.cuit,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Email:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"mail",value:t.mail,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"M\xe1ximo descubierto:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{type:"text",pattern:"[0-9.]*",name:"maxCuentaCorriente",value:t.maxCuentaCorriente,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Habilitado online:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"habilitadoOnline",type:"checkbox",checked:t.habilitadoOnline,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-buttons",children:[Object(l.jsx)(b,{label:"Guardar / Actualizar",action:n}),Object(l.jsx)(b,{label:"Limpiar",action:r})]})]})})},O=function(e){var t=e.encabezado,a=e.filas;return Object(l.jsx)("div",{className:"table-box",children:Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{children:t})}),Object(l.jsx)("tbody",{children:a})]})})},f=function(e){var t=e.children;return Object(l.jsx)("th",{children:t})},h=function(e){var t=e.children;return Object(l.jsx)("tr",{children:t})},v=function(e){var t=e.dato;return Object(l.jsx)("td",{children:t})},x=function(e){var t=e.titulo,a=e.action;return Object(l.jsx)("td",{children:Object(l.jsx)("button",{className:"table-button",onClick:function(){return a()},children:t})})},g=(a(24),a(2)),N=a.n(g),k=a(5),C=a(17),w=a.n(C),S="http://localhost",y="8181",E=y,z=y,I=y,P=y,D="producto",A="pedido",F="obra",L="detallepedido",R="liquidacion",T="cliente",U="empleado",q={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},G=function(){var e=Object(k.a)(N.a.mark((function e(t){var a,n,r,c,o,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r="".concat(S,":8181/login"),e.prev=2,e.next=5,w.a.post(r,{username:a,password:n},{headers:q});case 5:if(c=e.sent,o=c.data,i=c.status,"string"!==typeof o&&200===i){e.next=11;break}404===i&&localStorage.removeItem("token"),e.next=12;break;case 11:return e.abrupt("return",o);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),s="".concat(e.t0.response?e.t0.message:e.t0),console.log("Error en el login: ",{method:"login",URL:r,message:s});case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(E,"".concat(F)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(E,"".concat(F),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(E,"".concat(F,"/").concat(t.id),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(I,"".concat(A)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(I,"".concat(A),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(I,"".concat(A,"/?id=").concat(t.id,"&nuevoEstado=").concat(t.estado)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(k.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(I,"".concat(L,"/?idPedido=").concat(a.id),t));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(I,"".concat(L),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je(I,"".concat(L,"/id?idDetalle=").concat(t.id)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(z,"".concat(D)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(z,"".concat(D),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(z,"".concat(D),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(P,"".concat(R)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(P,"".concat(R,"/todos")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(P,"".concat(R,"/empleado?idEmpleado=").concat(t.id)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(P,"".concat(R,"/sueldo"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(P,"".concat(R,"/empleado/sueldo?idEmpleado=").concat(t.id)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(E,"".concat(T)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(E,"".concat(T),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(E,"".concat(T),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(E,"".concat(U)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=localStorage.getItem("token");return Object(u.a)(Object(u.a)({},q),{},{Authorization:"Bearer ".concat(e)})},ue=function(){var e=Object(k.a)(N.a.mark((function e(t,a,n){var r,c,o,i,s,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(S,":").concat(t,"/api/").concat(a),c="POST ".concat(r),console.log({request:c,data:n}),e.prev=3,e.next=6,w.a.post(r,n,{headers:se()});case 6:if(o=e.sent,i=o.data,200===(s=o.status)){e.next=13;break}throw 401===s&&(localStorage.removeItem("token"),localStorage.removeItem("username")),new Error(i);case 13:return console.log({response:c,dataResponse:i}),e.abrupt("return",{data:i});case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(3),u="".concat(e.t0.response?e.t0.response.data:e.t0),console.error({method:c,message:u,error:e.t0.response}),e.abrupt("return",{error:u});case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,a,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(k.a)(N.a.mark((function e(t,a,n){var r,c,o,i,s,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({postfixUrl:a}),r="".concat(S,":").concat(t,"/api/").concat(a),c="PUT ".concat(r),console.log({request:c,data:n}),e.prev=4,e.next=7,w.a.put(r,n,{headers:se()});case 7:if(o=e.sent,i=o.data,200===(s=o.status)){e.next=14;break}throw 401===s&&(localStorage.removeItem("token"),localStorage.removeItem("username")),new Error(i);case 14:return console.log({response:c,dataResponse:i}),e.abrupt("return",{data:i});case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(4),u="".concat(e.t0.response?e.t0.response.data:e.t0),console.error({method:c,URL:r,message:u,error:e.t0.response}),e.abrupt("return",{error:u});case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(k.a)(N.a.mark((function e(t,a){var n,r,c,o,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,":").concat(t,"/api/").concat(a),r="GET ".concat(n),console.log({request:r}),e.prev=3,e.next=6,w.a.get(n,{headers:se()});case 6:if(c=e.sent,o=c.data,200===(i=c.status)){e.next=13;break}throw 401===i&&(localStorage.removeItem("token"),localStorage.removeItem("username")),new Error(o);case 13:return console.log({response:r,dataResponse:o}),e.abrupt("return",{data:o});case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(3),s="".concat(e.t0.response?e.t0.response.data:e.t0),console.error({method:r,URL:n,message:s,error:e.t0.response}),e.abrupt("return",{error:s});case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,a){return e.apply(this,arguments)}}(),je=function(){var e=Object(k.a)(N.a.mark((function e(t,a){var n,r,c,o,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,":").concat(t,"/api/").concat(a),r="DELETE ".concat(n),console.log({request:r}),e.prev=3,e.next=6,w.a.delete(n,{headers:se()});case 6:if(c=e.sent,o=c.data,200===(i=c.status)){e.next=13;break}throw 401===i&&(localStorage.removeItem("token"),localStorage.removeItem("username")),new Error(o);case 13:return console.log({response:r,dataResponse:o}),e.abrupt("return",{data:o});case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(3),s="".concat(e.t0.response?e.t0.response.data:e.t0),console.error({method:r,URL:n,message:s,error:e.t0.response}),e.abrupt("return",{error:s});case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,a){return e.apply(this,arguments)}}(),be=a(3),pe={razonSocial:"",habilitadoOnline:!0,maxCuentaCorriente:0,mail:"",cuit:""},me=function(){var e=Object(i.f)(),t=Object(n.useState)(pe),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)([]),j=Object(c.a)(d,2),b=j[0],p=j[1],g=function(){re().then((function(e){var t=e.data;t&&p(t)}))};Object(n.useEffect)((function(){localStorage.getItem("token")?g():e.push(Re.login[2])}),[e]);var N=!!(r.cuit&&r.razonSocial&&r.mail&&r.maxCuentaCorriente),k=["ID Usuario","Raz\xf3n social","Email",""].map((function(e,t){return Object(l.jsx)(f,{children:e},t)}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Gesti\xf3n de clientes"})}),Object(l.jsx)(m,{cliente:r,actualizarCliente:function(e,t){var a=Object(u.a)(Object(u.a)({},r),{},Object(s.a)({},e,t));o(a)},saveOrUpdate:function(e){e.preventDefault(),N?r.id?oe(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido actualizar el cliente":a;t?(be.b.success("El cliente se ha actualizado correctamente"),g(),o(pe)):be.b.error(n)})):ce(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido guardar el cliente":a;t?(be.b.success("El cliente se ha guardado correctamente"),g(),o(pe)):be.b.error(n)})):be.b.error("Faltan campos del cliente")},clean:function(e){e.preventDefault(),o(pe)}}),Object(l.jsx)(O,{encabezado:k,filas:b?b.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:e.razonSocial}),Object(l.jsx)(v,{dato:e.mail}),Object(l.jsx)(x,{titulo:"Seleccionar",action:function(){return o(e)}})]},t)})):Object(l.jsx)(l.Fragment,{})})]})},Oe=function(e){var t=e.logged,a=e.setLogged,r=Object(n.useState)(""),o=Object(c.a)(r,2),i=o[0],s=o[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),b=d[0],p=d[1],m=function(){t||G({username:i,password:b}).then((function(e){e&&e.accessToken?(a(!0),localStorage.setItem("token",e.accessToken),localStorage.setItem("username",i),be.b.success("Se ha logueado correctamente!")):(be.b.error("Revise usuario y/o contrase\xf1a"),a(!1),localStorage.removeItem("token"),localStorage.removeItem("username"))}))};return t?Object(l.jsxs)("h1",{children:["Bienvenido ",localStorage.getItem("username"),"!"]}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{className:"form-step",children:" Login "}),Object(l.jsxs)("form",{id:"formLogin",children:[Object(l.jsxs)("div",{className:"col-75",children:[Object(l.jsx)(j,{value:"Nombre de usuario"}),Object(l.jsx)("div",{className:"col-75",children:Object(l.jsx)("input",{name:"nombre",type:"text",placeholder:"Username (dan2021)",value:i,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){return function(e){if("Enter"===e.key){var t=e.target.form,a=Array.prototype.indexOf.call(t,e.target);t.elements[a+1].focus(),e.preventDefault()}}(e)}})})]}),Object(l.jsxs)("div",{className:"col-75",children:[Object(l.jsx)(j,{value:"Contrase\xf1a"}),Object(l.jsx)("div",{className:"col-75",children:Object(l.jsx)("input",{name:"password",type:"password",placeholder:"Password (dan2021)",value:b,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&m()}})})]})]}),Object(l.jsx)("div",{className:"col-75 button-login",children:Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"btn-wide",onClick:m,children:"Ingresar"})})})]})},fe=function(e){var t=e.obra,a=e.actualizarCampos,n=e.saveOrUpdate,r=e.clean,c=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;e.target.validity.valid&&a(t,n)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)("h3",{children:"Obra"}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Descripci\xf3n:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"descripcion",value:t.descripcion,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Latitud:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{type:"text",pattern:"[0-9]*",name:"latitud",value:t.latitud,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Longitud:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{type:"text",pattern:"[0-9]*",name:"longitud",value:t.longitud,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Direcci\xf3n:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"direccion",value:t.direccion,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Superficie:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{type:"text",pattern:"[0-9]*",name:"superficie",value:t.superficie,onChange:c})})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Tipo de obra:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsxs)("select",{name:"tipoObra",value:t.tipoObra,onChange:c,children:[Object(l.jsx)("option",{value:"REFORMA",children:"Reforma"}),Object(l.jsx)("option",{value:"CASA",children:"Casa"}),Object(l.jsx)("option",{value:"EDIFICIO",children:"Edificio"}),Object(l.jsx)("option",{value:"VIAL",children:"Vial"})]})})]}),Object(l.jsxs)("div",{className:"form-buttons",children:[Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:function(e){return n(e)},children:"Guardar"})}),Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:r,children:"Limpiar"})})]})]})},he=function(e){var t=e.cliente,a=e.actualizarCampos,n=e.listaClientes,r=function(e){var t=e.target.name,n=e.target.value;e.target.validity.valid&&a(t,n)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)("h3",{children:"Cliente"}),Object(l.jsx)(d,{label:"Razon social:",placeholder:"Razon Social",name:"razonSocial",value:t.razonSocial,onChange:r,opciones:n.map((function(e){return e.razonSocial}))}),Object(l.jsx)(d,{label:"CUIT:",placeholder:"CUIT",name:"cuit",value:t.cuit,onChange:r,opciones:n.map((function(e){return e.cuit}))})]})},ve={id:null,razonSocial:"",cuit:""},xe={id:null,descripcion:"",latitud:"",longitud:"",direccion:"",superficie:"",tipoObra:"REFORMA",cliente:ve},ge=function(){var e=Object(i.f)(),t=Object(n.useState)(xe),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)(ve),j=Object(c.a)(d,2),b=j[0],p=j[1],m=Object(n.useState)([]),g=Object(c.a)(m,2),N=g[0],k=g[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],y=w[1];Object(n.useEffect)((function(){localStorage.getItem("token")?(E(),z()):e.push(Re.login)}),[e]);var E=function(){re().then((function(e){var t=e.data;t&&(k(t),p(t[0]))}))},z=function(){M().then((function(e){var t=e.data;t&&y(t)}))},I=["ID Obra","Descripcion","Direccion","Superficie","Tipo de Obra",""].map((function(e,t){return Object(l.jsx)(f,{children:e},t)}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Gestion de Obras"}),Object(l.jsxs)("div",{className:"panel-form-doble",children:[Object(l.jsx)(fe,{obra:r,actualizarCampos:function(e,t){var a=Object(u.a)(Object(u.a)({},r),{},Object(s.a)({},e,t));o(a)},clean:function(){o(xe),p(ve)},saveOrUpdate:function(e){e.preventDefault(),r.descripcion&&r.latitud&&r.longitud&&r.superficie?(r.cliente=b,r.id?B(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido actualizar la obra correctamente":a;t?(p(t),be.b.success("La obra se ha actualizado correctamente"),z(),o(xe),p(ve)):be.b.error(n)})):H(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido guardar la obra correctamente":a;t?(be.b.success("La obra se ha guardado correctamente"),z(),o(xe),p(ve)):be.b.error(n)}))):(console.log({cliente:b}),console.log({obra:r}),be.b.error("Faltan indicar ciertos datos de la obra"))}}),Object(l.jsx)(he,{cliente:b,actualizarCampos:function(e,t){var a=N.findIndex((function(a){return a[e]===t}));p(N[a]);var n=Object(u.a)(Object(u.a)({},r),{},{cliente:b});o(n)},listaClientes:N})]}),Object(l.jsx)("div",{className:"panel",children:Object(l.jsx)(O,{encabezado:I,filas:S?(console.log(S),S.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:e.descripcion}),Object(l.jsx)(v,{dato:e.direccion}),Object(l.jsx)(v,{dato:e.superficie}),Object(l.jsx)(v,{dato:e.tipoObra}),Object(l.jsx)(x,{titulo:"Seleccionar",action:function(){o(e),p(e.cliente)}})]},t)}))):Object(l.jsx)(l.Fragment,{})})})]})},Ne=function(e){var t=e.producto,a=e.unidades,n=e.actualizarCampos,r=e.clean,c=e.saveOrUpdate,o=function(e){e.preventDefault();var t=e.target.name,a=e.target.value;e.target.validity.valid&&n(t,a)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)("h3",{children:"Producto"}),Object(l.jsx)(p,{label:"Nombre:",name:"nombre",value:t.nombre,onChange:o}),Object(l.jsx)(p,{label:"Descripci\xf3n:",name:"descripcion",value:t.descripcion,onChange:o}),Object(l.jsx)(p,{label:"Precio:",name:"precio",pattern:"[0-9.]*",value:t.precio,onChange:o}),Object(l.jsx)(p,{label:"Stock actual:",name:"stockActual",pattern:"[0-9.]*",value:t.stockActual,onChange:o}),Object(l.jsx)(p,{label:"Stock m\xednimo:",name:"stockMinimo",pattern:"[0-9.]*",value:t.stockMinimo,onChange:o}),Object(l.jsx)(d,{label:"Unidad:",name:"unidad",value:t.unidad.descripcion,opciones:a&&a.length>0?a.map((function(e){return e.descripcion})):[],onChange:o}),Object(l.jsxs)("div",{className:"form-buttons",children:[Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:c,children:"Guardar"})}),Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:r,children:"Limpiar"})})]})]})},ke={descripcion:""},Ce={nombre:"",descripcion:"",precio:"",stockActual:"",stockMinimo:"",unidad:ke},we=function(){var e=Object(i.f)(),t=Object(n.useState)(Ce),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)([]),j=Object(c.a)(d,2),b=j[0],p=j[1],m=Object(n.useState)([]),g=Object(c.a)(m,2),N=g[0],k=g[1];Object(n.useEffect)((function(){localStorage.getItem("token")?C():e.push(Re.login)}),[e]);var C=function(){_().then((function(e){var t=e.data;t&&p(t)})),de(z,"".concat(D,"/unidades")).then((function(e){var t=e.data;t&&k(t)}))},w=!!(r.nombre&&r.precio&&r.descripcion&&r.stockActual&&r.stockMinimo&&r.unidad),S=["ID Producto","Nombre","Descripcion","Precio","Stock Actual","Stock Minimo",""].map((function(e,t){return Object(l.jsx)(f,{children:e},t)}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Gesti\xf3n productos"}),Object(l.jsx)("div",{className:"panel-form-simple",children:Object(l.jsx)(Ne,{producto:r,unidades:N,actualizarCampos:function(e,t){"unidad"===e&&(t=Object(u.a)(Object(u.a)({},ke),{},{descripcion:t}));var a=Object(u.a)(Object(u.a)({},r),{},Object(s.a)({},e,t));o(a)},clean:function(){o(Ce)},saveOrUpdate:function(e){e.preventDefault(),w?r.id?Y(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido actualizar el producto":a;t?(be.b.success("El producto se ha actualizado correctamente"),C(),o(Ce)):be.b.error(n)})):Q(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido guardar el producto":a;t?(be.b.success("El producto se ha guardado correctamente"),C(),o(Ce)):be.b.error(n)})):be.b.error("Faltan campos del producto")}})}),Object(l.jsx)("div",{className:"panel",children:Object(l.jsx)(O,{encabezado:S,filas:b&&b.length>0?b.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:e.nombre}),Object(l.jsx)(v,{dato:e.descripcion}),Object(l.jsx)(v,{dato:e.precio}),Object(l.jsx)(v,{dato:e.stockActual}),Object(l.jsx)(v,{dato:e.stockMinimo}),Object(l.jsx)(x,{titulo:"Seleccionar",action:function(){return o(e)}})]},t)})):Object(l.jsx)(l.Fragment,{})})})]})},Se=function(e){var t=e.pedido,a=e.actualizarCampos,n=e.clean,r=e.saveOrUpdate,c=(e.verDetalle,e.obras),o=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;e.target.validity.valid&&a(t,n)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)("div",{className:"form-row",children:Object(l.jsx)("h2",{children:"Pedido"})}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)(j,{value:"Fecha:"}),Object(l.jsx)("div",{className:"form-input",children:Object(l.jsx)("input",{name:"fechaPedido",type:"date",pattern:"\\d{4}/\\d{1,2}/\\d{1,2}",value:t.fechaPedido,onChange:o})})]}),Object(l.jsx)(d,{label:"Obra:",name:"obra",onChange:o,opciones:c&&c.length>0?c.map((function(e){return e.id})):[]}),Object(l.jsx)(d,{label:"Estado:",name:"estado",value:t.estado,onChange:o,opciones:["NUEVO","CONFIRMADO","PENDIENTE","CANCELADO","ACEPTADO","RECHAZADO","EN_PREPARACION","ENTREGADO"]}),Object(l.jsxs)("div",{className:"form-buttons",children:[Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:n,children:"Limpiar"})}),Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:r,children:"Guardar"})})]})]})},ye=function(e){var t,a,n,r,c=e.detallePedido,o=e.actualizarCampos,i=e.listaProductos,s=e.update,u=e.hayPedido,j=function(e){var t=e.target.name,a=e.target.value;e.target.validity.valid&&o(t,a)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)("div",{className:"form-row",children:Object(l.jsx)("h2",{children:"Detalle pedido"})}),Object(l.jsx)(p,{label:"Cantidad:",pattern:"[0-9.]*",name:"cantidad",value:c.cantidad,onChange:j}),Object(l.jsx)(p,{label:"Precio:",name:"precio",readOnly:!0,value:(null!==(t=c.cantidad)&&void 0!==t?t:0)*(null!==(a=null===(n=c.producto)||void 0===n?void 0:n.precio)&&void 0!==a?a:1)}),Object(l.jsx)(d,{label:"Producto:",name:"producto",onChange:j,value:null===(r=c.producto)||void 0===r?void 0:r.nombre,opciones:i&&i.length?i.map((function(e){return e.nombre})):[]}),u?Object(l.jsx)("div",{className:"form-buttons",children:Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{className:"btn-wide",type:"button",onClick:s,children:"Guardar"})})}):Object(l.jsx)(l.Fragment,{})]})},Ee={id:null,fechaPedido:"",obra:"",estado:"NUEVO",detalle:[]},ze={id:null,cantidad:"",precio:"",producto:""},Ie=function(){var e=Object(i.f)(),t=Object(n.useState)(Ee),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)([]),j=Object(c.a)(d,2),b=j[0],p=j[1],m=Object(n.useState)(ze),g=Object(c.a)(m,2),N=g[0],k=g[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],y=w[1],E=Object(n.useState)([]),z=Object(c.a)(E,2),I=z[0],P=z[1],D=Object(n.useState)([]),A=Object(c.a)(D,2),F=A[0],L=A[1];Object(n.useEffect)((function(){localStorage.getItem("token")?(V().then((function(e){var t=e.data;t&&p(t)})),T(),U()):e.push(Re.login)}),[e]);var R=function(){V().then((function(e){var t=e.data;t&&(p(t),y(t.detalle),k(t.detalle?t.detalle[0]:ze))}))},T=function(){_().then((function(e){var t=e.data;t&&(P(t),N.producto=t[0],k(N))}))},U=function(){M().then((function(e){var t=e.data;t&&(L(t),r.obra=t[0])}))},q=!!(r.obra&&r.estado&&r.detalle&&r.fechaPedido),G=!!(N.producto&&N.precio>=0&&N.cantidad),H=["ID Pedido","Fecha de Pedido","ID Obra","Estado",""].map((function(e,t){return Object(l.jsx)(f,{children:e},t)})),B=["ID Detalle","Cantidad","Precio","Producto","",""].map((function(e,t){return Object(l.jsx)(f,{children:e},t)}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Gesti\xf3n pedidos"}),Object(l.jsxs)("div",{className:"panel-form-doble",children:[Object(l.jsx)(Se,{pedido:r,actualizarCampos:function(e,t){if("obra"===e){var a=F.findIndex((function(e){return e.id==t})),n=Object(u.a)(Object(u.a)({},r),{},{obra:F[a]});o(n)}else{var c=Object(u.a)(Object(u.a)({},r),{},Object(s.a)({},e,t));o(c)}},clean:function(){o(Ee),y([]),k(ze)},saveOrUpdate:function(e){e.preventDefault(),q?r.id?K(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido actualizar el pedido":a;console.log({data:t,error:n}),t?(be.b.success("El pedido se ha actualizado correctamente"),R(),o(Ee)):be.b.error(n)})):J(r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido guardar el pedido":a;t?(be.b.success("El pedido se ha guardado correctamente"),R(),o(Ee)):be.b.error(n)})):(console.log(r),be.b.error("Faltan campos del pedido"))},obras:F}),Object(l.jsx)(ye,{hayPedido:r&&r.id,detallePedido:N,listaProductos:I,actualizarCampos:function(e,t){if(console.log({nombreAtributo:e,valorAtributo:t}),"producto"===e){var a,n=I.findIndex((function(e){return e.nombre===t}));N.producto=I[n],N.precio=(null!==(a=N.cantidad)&&void 0!==a?a:0)*(I[n]?I[n].precio:1),k(N)}else{var r,c,o=Object(u.a)(Object(u.a)({},N),{},Object(s.a)({},e,t));o.precio=(null!==(r=N.cantidad)&&void 0!==r?r:1)*(null!==(c=N.producto.precio)&&void 0!==c?c:1),k(o)}},update:function(e){e.preventDefault(),r.id?G?N.id?X(N,r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido actualizar el detalle del pedido":a;t?(be.b.success("El detalle del pedido se ha actualizado correctamente"),R(),k(ze)):be.b.error(n)})):W(N,r).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido guardar el detalle del pedido":a;t?(be.b.success("El detalle del pedido se ha guardado correctamente"),R(),k(ze)):be.b.error(n)})):(console.log(N),be.b.error("Faltan campos del detalle del pedido")):be.b.error("Debe seleccionar un pedido al cual actualizarle el detalle")}})]}),Object(l.jsxs)("div",{className:"table-double",children:[Object(l.jsxs)("div",{className:"table-div",children:[Object(l.jsx)("h3",{children:"Pedidos"}),Object(l.jsx)(O,{encabezado:H,filas:b?b.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:e.fechaPedido}),Object(l.jsx)(v,{dato:e.obra.id}),Object(l.jsx)(v,{dato:e.estado}),Object(l.jsx)(x,{titulo:"Seleccionar",action:function(){return o(t=e),y(t.detalle),void k(ze);var t}})]},t)})):Object(l.jsx)(l.Fragment,{})})]}),Object(l.jsxs)("div",{className:"table-div",children:[Object(l.jsx)("h3",{children:"Detalle"}),Object(l.jsx)(O,{encabezado:B,filas:S?S.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:e.cantidad}),Object(l.jsx)(v,{dato:e.precio}),Object(l.jsx)(v,{dato:e.producto.nombre}),Object(l.jsx)(x,{titulo:"Seleccionar",action:function(){return k(e)}}),Object(l.jsx)(x,{titulo:"Eliminar",action:function(){return function(e){return Z(e).then((function(e){var t=e.data,a=e.error,n=void 0===a?"No se ha podido eliminar el detalle del pedido":a;t?(be.b.success("El detalle del pedido se ha eliminado correctamente"),R(),k(ze)):be.b.error(n)}))}(e)}})]},t)})):Object(l.jsx)(l.Fragment,{})})]})]})]})},Pe=function(e){var t=e.empleado,a=e.actualizarCampos,n=e.listaEmpleados,r=e.liquidarTodos,c=e.liquidarEmpleado,o=e.actualizarCamposSueldo,i=e.actualizarSueldoEmpleado,s=e.sueldoEmpleado,u=function(e){var t=e.target.name,a=e.target.value;e.target.validity.valid&&o(t,a)};return Object(l.jsxs)("form",{className:"form-box",children:[Object(l.jsx)(d,{label:"Empleado",name:"nombre",value:t.nombre,onChange:function(e){var t=e.target.value;e.target.validity.valid&&a(t)},opciones:n.map((function(e){return e.nombre}))}),Object(l.jsx)(p,{label:"Monto",name:"monto",pattern:"[0-9.]*",value:s.monto,onChange:u}),Object(l.jsx)(p,{label:"Porcentaje de comisi\xf3n:",name:"comision",pattern:"[0-9.]*",value:s.comision,onChange:u}),Object(l.jsxs)("div",{className:"form-buttons",children:[Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:i,children:"Actualizar Sueldo"})}),Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:c,children:"Liquidar Empleado"})}),Object(l.jsx)("div",{className:"form-button",children:Object(l.jsx)("button",{type:"button",onClick:r,children:"Liquidar a todos"})})]})]})},De={nombre:""},Ae={monto:0,comision:0},Fe=function(){var e=Object(i.f)(),t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],o=a[1],d=Object(n.useState)([]),j=Object(c.a)(d,2),b=j[0],p=j[1],m=Object(n.useState)(De),x=Object(c.a)(m,2),g=x[0],N=x[1],k=Object(n.useState)(Ae),C=Object(c.a)(k,2),w=C[0],S=C[1],y=function(){$().then((function(e){var t=e.data;t&&o(t)}))},E=function(e){e&&e.id&&ne(e).then((function(e){var t=e.data;t&&(S(t),be.b.success("Se ha actualizado el sueldo correctamente al monto de "+t.monto+" y comisi\xf3n "+t.comision))}))};Object(n.useState)((function(){localStorage.getItem("token")?(ie().then((function(e){var t=e.data;t&&(p(t),N(t[0]))})),y()):e.push(Re.login)}),[e]);var z=["ID Liquidaci\xf3n","Empleado","Fecha","Monto"].map((function(e,t){return Object(l.jsx)(f,{children:e},t)}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Gesti\xf3n de liquidaciones"}),Object(l.jsx)("div",{className:"panel-form-simple",children:Object(l.jsx)(Pe,{empleado:g,listaEmpleados:b,actualizarCampos:function(e){var t=b.findIndex((function(t){return t.nombre===e}));N(b[t]),E(b[t])},actualizarCamposSueldo:function(e,t){var a=Object(u.a)(Object(u.a)({},w),{},Object(s.a)({},e,t));S(a)},actualizarSueldoEmpleado:function(){ae(w).then((function(){E()}))},liquidarEmpleado:function(){g&&g.id&&te(g).then((function(){return y()}))},liquidarTodos:function(){ee().then((function(){return y()}))},sueldoEmpleado:w})}),Object(l.jsx)(O,{encabezado:z,filas:r?r.map((function(e,t){return Object(l.jsxs)(h,{children:[Object(l.jsx)(v,{dato:e.id}),Object(l.jsx)(v,{dato:b&&b[b.findIndex((function(t){return t.id==e.empleado.id}))]?b[b.findIndex((function(t){return t.id==e.empleado.id}))].nombre:"-"}),Object(l.jsx)(v,{dato:e.fecha}),Object(l.jsx)(v,{dato:e.monto})]},t)})):Object(l.jsx)(l.Fragment,{})})]})},Le=function(e){var t=e.logout;return Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{className:"nav-links",children:[Object(l.jsx)(o.b,{className:"nav-links",to:Re.clientes,children:Object(l.jsx)("li",{children:"Clientes"})}),Object(l.jsx)(o.b,{className:"nav-links",to:Re.obras,children:Object(l.jsx)("li",{children:"Obras"})}),Object(l.jsx)(o.b,{className:"nav-links",to:Re.pedidos,children:Object(l.jsx)("li",{children:"Pedidos"})}),Object(l.jsx)(o.b,{className:"nav-links",to:Re.productos,children:Object(l.jsx)("li",{children:"Productos"})}),Object(l.jsx)(o.b,{className:"nav-links",to:Re.liquidacion,children:Object(l.jsx)("li",{children:"Liquidaci\xf3n"})}),Object(l.jsx)(o.b,{className:"nav-links",to:Re.login,onClick:function(){return t()},children:Object(l.jsx)("li",{children:"Cerrar Sesi\xf3n"})})]})})},Re=(a(65),{login:"/",clientes:"/page/clientes",obras:"/page/obras",productos:"/page/productos",pedidos:"/page/pedidos",pagos:"/page/pagos",liquidacion:"/page/liquidacion",logout:"/logout"});var Te=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){r(null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token"))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(be.a,{position:"bottom-right",autoClose:2500,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!1}),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(o.a,{children:[a?Object(l.jsx)(Le,{logout:function(){be.b.success("Sesi\xf3n cerrada"),r(!1),localStorage.removeItem("token")}}):Object(l.jsx)(l.Fragment,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:Re.login,children:Object(l.jsx)(Oe,{logged:a,setLogged:r})}),Object(l.jsx)(i.a,{path:Re.clientes,component:me}),Object(l.jsx)(i.a,{path:Re.obras,component:ge}),Object(l.jsx)(i.a,{path:Re.productos,component:we}),Object(l.jsx)(i.a,{path:Re.pedidos,component:Ie}),Object(l.jsx)(i.a,{path:Re.liquidacion,component:Fe})]})]})})]})},Ue=function(){return Object(l.jsx)(Te,{})};Object(r.render)(Object(l.jsx)(Ue,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.34acc8ab.chunk.js.map